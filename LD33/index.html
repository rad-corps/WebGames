<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8"/>
	<title>LD 33 Entry - Javier Munoz and Adam Hulbert</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			background-color: #FFF;
		}

		#loader{
    		/*background:green; */
    		width:640px;
    		height:360px;   
    		text-align: center;
		}
	</style>
	<script src="../bin/pixi.js"></script>

</head>
<body>

    <div id="loader" class="layer">
    	<br></br>
        <h3>Loading LD 33 Entry - Javier Munoz and Adam Hulbert</h3>
        <img src="./img/loading_transparent.gif" alt="loader" />     
    </div>

	<script src="GLOBALS.js"></script>
    <script src="keyboard.js"></script>
	<script src="vector.js"></script>
    <script src="Rect.js"></script>
    <script src="Player.js"></script>
    <script src="Platform.js"></script>
    <script src="GameLoop.js"></script>

	<script>

function onAssetsLoaded(){

	window.gameLoop = new GameLoop();
	window.gameLoop.init();
	window.gameLoop.run();
	startGame();
	document.getElementById("loader").style.display = "none";
}

function preloadTextures() {
	
	// create a new loader
	var loader = PIXI.loader;
	loader.add('player', './img/player.png');
	loader.add('ground', './img/ground.png');
	// use callback
	loader.once('complete', onAssetsLoaded);
	//begin load
	loader.load();
}

function startGame() {		
	//gameLoop.init();
	gameState = 'playing';
}

function playAgain() {
	startGame();
	window.blackHole.SetPos(new PIXI.Point(AH_GLOBALS.SCREEN_W/2, AH_GLOBALS.SCREEN_H/2));
}

function scaleSprite(sprite_){
	
	//commented out to remove scaling
	// sprite_.scale.x = window.innerHeight / AH_GLOBALS.SCREEN_H;
	// sprite_.scale.y = window.innerHeight / AH_GLOBALS.SCREEN_H;
}

function collisionManager(sprite1, sprite2)
{
	//find left, right, top and bottom of sprite1
	var l1 = sprite1.position.x - sprite1.width /2;
	var r1 = sprite1.position.x + sprite1.width /2;
	var t1 = sprite1.position.y + sprite1.height /2;
	var b1 = sprite1.position.y - sprite1.height /2;
	var l2 = sprite2.position.x - sprite2.width /2;
	var r2 = sprite2.position.x + sprite2.width /2;
	var t2 = sprite2.position.y + sprite2.height /2;
	var b2 = sprite2.position.y - sprite2.height /2;

	if (r1 < l2 || r2 < l1 || b1 > t2 || t1 < b2){
		return false;
	}
	return true;
}


preloadTextures();

	</script>

	</body>
</html>
